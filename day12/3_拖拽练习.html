<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#box{
				width: 300px;
				height: 300px;
				background: #f99;
				border-radius: 10px;
				position: relative;
				top: 0;
				left: 0;
				display: block;
			}
			#box1{
				width: 300px;
				height: 30px;
				background: purple;
			}
			p{
				width: 100px;
				height: 30px;
				line-height: 30px;
				text-align: center;
				color: #fff;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<div id="box1">
				<p id="close">关闭</p>
			</div>
		</div>
		<script>
			//拖拽
			//窗口拖动和关闭,只可以点击紫色区域才可以拖拽窗口,
			//点击关闭按钮就可以关闭窗口.
			var box = document.getElementById("box");
			var box1 = document.getElementById("box1");
			var close =  document.getElementById("close");
			box1.onmousedown = function(evt){
				var evt = evt || event;
				var x = evt.clientX;
				var y = evt.clientY;
				//box.offsetLeft 盒子左上角距它父级的距离
				//box.offsetTop 盒子上角距它父级的距离
				//盒子原点x坐标到盒子左边界的距离
				var disX = x - box.offsetLeft;
				//盒子原点y坐标到盒子上边界的距离
				var disY = y - box.offsetTop;
				document.onmousemove = function(evt){
					var evt = evt || event;
					var x = evt.clientX;
					var y = evt.clientY;
					box.style.left = x - disX + "px";
					box.style.top = y - disY + "px";
				}
				document.onmouseup = function(){
					document.onmousemove = null;
				}
				close.onclick = function(){
					box.style.display = "none";
				}
			}
		</script>
	</body>
</html>
